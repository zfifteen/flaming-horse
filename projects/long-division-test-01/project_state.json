{
  "project_name": "long-division-test-01",
  "topic": "Create a math video about long division.",
  "phase": "build_scenes",
  "created_at": "2026-02-14T16:51:07Z",
  "updated_at": "2026-02-14T20:38:14Z",
  "run_count": 17,
  "plan_file": "plan.json",
  "narration_file": "narration_script.py",
  "voice_config_file": null,
  "scenes": [
    {
      "id": "scene_01",
      "title": "Introduction to Long Division",
      "narration_key": "intro",
      "narration_summary": "Hook with everyday example, introduce long division as efficient method for large numbers.",
      "estimated_words": 80,
      "estimated_duration": "32s",
      "animations": [
        "Title fade-in",
        "Simple division graphic"
      ],
      "complexity": "low",
      "risk_flags": [],
      "status": "rendered",
      "file": "scene_01.py",
      "class_name": "Scene01Intro",
      "video_file": "media/videos/scene_01/1440p60/Scene01Intro.mp4",
      "verification": {
        "file_size_bytes": 0,
        "duration_seconds": 17.05,
        "audio_present": true,
        "verified_at": "2026-02-14T20:37:41Z"
      }
    },
    {
      "id": "scene_02",
      "title": "Key Components",
      "narration_key": "components",
      "narration_summary": "Define dividend, divisor, quotient, remainder; show visual setup.",
      "estimated_words": 90,
      "estimated_duration": "36s",
      "animations": [
        "Label dividend/divisor",
        "Draw division bracket"
      ],
      "complexity": "low",
      "risk_flags": [],
      "status": "pending",
      "file": "scene_02.py",
      "class_name": "Scene02Components"
    },
    {
      "id": "scene_03",
      "title": "Step 1: First Division",
      "narration_key": "step1",
      "narration_summary": "How many times divisor fits into first digits of dividend; place first quotient digit.",
      "estimated_words": 100,
      "estimated_duration": "40s",
      "animations": [
        "Highlight partial dividend",
        "Animate multiplication/subtraction"
      ],
      "complexity": "medium",
      "risk_flags": [],
      "status": "built",
      "file": "scene_03.py",
      "class_name": "Scene03Step1"
    },
    {
      "id": "scene_04",
      "title": "Continuing the Process",
      "narration_key": "step2",
      "narration_summary": "Bring down next digit, repeat division, multiply, subtract.",
      "estimated_words": 120,
      "estimated_duration": "48s",
      "animations": [
        "Bring down digit",
        "Repeat steps with animation"
      ],
      "complexity": "medium",
      "risk_flags": [],
      "status": "built",
      "file": "scene_04.py",
      "class_name": "Scene04Step2"
    },
    {
      "id": "scene_05",
      "title": "Complete Example",
      "narration_key": "example",
      "narration_summary": "Full walkthrough: 12345 \u00f7 23, verify quotient 536 and remainder.",
      "estimated_words": 150,
      "estimated_duration": "60s",
      "animations": [
        "Build full division tableau",
        "Step-by-step highlighting"
      ],
      "complexity": "high",
      "risk_flags": [],
      "status": "built",
      "file": "scene_05.py",
      "class_name": "Scene05Example"
    },
    {
      "id": "scene_06",
      "title": "Recap and Tips",
      "narration_key": "recap",
      "narration_summary": "Summarize steps, common pitfalls, practice encouragement.",
      "estimated_words": 110,
      "estimated_duration": "44s",
      "animations": [
        "Summary checklist",
        "Fade out with call to action"
      ],
      "complexity": "low",
      "risk_flags": [],
      "status": "built",
      "file": "scene_06.py",
      "class_name": "Scene06Recap"
    }
  ],
  "current_scene_index": 1,
  "errors": [
    "Assemble incomplete: one or more scene video files are missing; routing back to final_render",
    "Phase final_render failed after 4 attempts: see build.log",
    "final_render failed for scene_02: Render failed for scene_02; see build.log for details."
  ],
  "history": [
    {
      "timestamp": "2026-02-14T16:58:41Z",
      "phase": "plan",
      "action": "Applied plan.json to project_state.json (deterministic)"
    },
    {
      "timestamp": "2026-02-14T16:58:41Z",
      "phase": "plan",
      "action": "Applied plan.json to project_state.json (deterministic)"
    },
    {
      "timestamp": "2026-02-14T16:58:41Z",
      "phase": "review",
      "action": "Advanced to narration (deterministic)"
    },
    {
      "timestamp": "2026-02-14T16:58:42Z",
      "phase": "review",
      "action": "Advanced to narration (deterministic)"
    },
    {
      "timestamp": "2026-02-14T16:59:11Z",
      "phase": "narration",
      "action": "Detected narration_script.py; advanced to build_scenes (deterministic)"
    },
    {
      "timestamp": "2026-02-14T16:59:12Z",
      "phase": "narration",
      "action": "Detected narration_script.py; advanced to build_scenes (deterministic)"
    },
    {
      "timestamp": "2026-02-14T17:03:23Z",
      "phase": "build_scenes",
      "action": "retry_exhausted",
      "reason": "self-healing attempts exhausted"
    },
    {
      "timestamp": "2026-02-14T17:30:07Z",
      "phase": "manual_reset",
      "action": "Cleared needs_human_review after manim PATH fix"
    },
    {
      "timestamp": "2026-02-14T17:36:02Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_01.py (Scene01Intro); advanced index to 1"
    },
    {
      "timestamp": "2026-02-14T17:36:02Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_02.py (Scene02Components); advanced index to 2"
    },
    {
      "timestamp": "2026-02-14T17:37:43Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_03.py (Scene03Step1); advanced index to 3"
    },
    {
      "timestamp": "2026-02-14T17:37:43Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_04.py (Scene04Step2); advanced index to 4"
    },
    {
      "timestamp": "2026-02-14T17:40:20Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_05.py (Scene05Example); advanced index to 5"
    },
    {
      "timestamp": "2026-02-14T17:40:20Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_06.py (Scene06Recap); advanced index to 6"
    },
    {
      "timestamp": "2026-02-14T17:41:21Z",
      "phase": "scene_qc",
      "action": "Detected scene_qc_report.md; advanced to precache_voiceovers (deterministic)"
    },
    {
      "timestamp": "2026-02-14T17:41:21Z",
      "phase": "scene_qc",
      "action": "Detected scene_qc_report.md; advanced to precache_voiceovers (deterministic)"
    },
    {
      "timestamp": "2026-02-14T18:03:25Z",
      "phase": "precache_voiceovers",
      "action": "Detected media/voiceovers/qwen/cache.json; advanced to final_render (deterministic)"
    },
    {
      "timestamp": "2026-02-14T18:03:25Z",
      "phase": "precache_voiceovers",
      "action": "Detected media/voiceovers/qwen/cache.json; advanced to final_render (deterministic)"
    },
    {
      "timestamp": "2026-02-14T18:08:44Z",
      "phase": "final_render",
      "scene": "scene_01",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_01; see build.log for details."
    },
    "Phase final_render: Rendered and verified all scenes (scripted), advancing to assemble",
    {
      "timestamp": "2026-02-14T18:11:57Z",
      "phase": "assemble",
      "action": "Missing scene inputs detected; moved phase back to final_render"
    },
    {
      "timestamp": "2026-02-14T18:18:37Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T18:23:00Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T18:29:03Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T18:29:03Z",
      "phase": "final_render",
      "action": "retry_exhausted",
      "reason": "self-healing attempts exhausted"
    },
    {
      "timestamp": "2026-02-14T19:28:19Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_02.py (Scene02Components); advanced index to 2"
    },
    {
      "timestamp": "2026-02-14T19:28:19Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_03.py (Scene03Step1); advanced index to 3"
    },
    {
      "timestamp": "2026-02-14T19:33:15Z",
      "phase": "manual_reset",
      "action": "Set phase to final_render to trigger retry-context validation"
    },
    {
      "timestamp": "2026-02-14T19:42:30Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T20:04:16Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_02.py (Scene02Components); advanced index to 2"
    },
    {
      "timestamp": "2026-02-14T20:04:16Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_03.py (Scene03Step1); advanced index to 3"
    },
    {
      "timestamp": "2026-02-14T20:09:25Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_04.py (Scene04Step2); advanced index to 4"
    },
    {
      "timestamp": "2026-02-14T20:09:25Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_05.py (Scene05Example); advanced index to 5"
    },
    {
      "timestamp": "2026-02-14T20:14:01Z",
      "phase": "build_scenes",
      "action": "Marked built: scene_06.py (Scene06Recap); advanced index to 6"
    },
    {
      "timestamp": "2026-02-14T20:15:21Z",
      "phase": "scene_qc",
      "action": "Detected scene_qc_report.md; advanced to precache_voiceovers (deterministic)"
    },
    {
      "timestamp": "2026-02-14T20:15:22Z",
      "phase": "scene_qc",
      "action": "Detected scene_qc_report.md; advanced to precache_voiceovers (deterministic)"
    },
    {
      "timestamp": "2026-02-14T20:15:33Z",
      "phase": "precache_voiceovers",
      "action": "Detected media/voiceovers/qwen/cache.json; advanced to final_render (deterministic)"
    },
    {
      "timestamp": "2026-02-14T20:15:33Z",
      "phase": "precache_voiceovers",
      "action": "Detected media/voiceovers/qwen/cache.json; advanced to final_render (deterministic)"
    },
    {
      "timestamp": "2026-02-14T20:20:51Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T20:32:19Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T20:37:36Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T20:38:14Z",
      "phase": "final_render",
      "scene": "scene_02",
      "action": "revert_to_build_scenes",
      "reason": "Render failed for scene_02; see build.log for details."
    },
    {
      "timestamp": "2026-02-14T20:38:14Z",
      "phase": "final_render",
      "action": "retry_exhausted",
      "reason": "self-healing attempts exhausted"
    }
  ],
  "flags": {
    "needs_human_review": true,
    "dry_run": false,
    "force_replan": false
  }
}
