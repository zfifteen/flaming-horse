phase: scene_repair

inputs:
  - broken_scene_file: --scene-file
  - broken_scene_content: file_contents
  - scene_metadata: state.current_scene
  - scene_narration: SCRIPT[narration_key]
  - retry_context: required
  - exclude: unrelated_scenes, full_pipeline_doc

output:
  format: json_object
  payload:
    scene_body: "<repaired_python_scene_body_only>"
  required_fields:
    - scene_body

validation:
  python_syntax_valid: true
  original_failure_addressed: true
  no_new_policy_violations: true
